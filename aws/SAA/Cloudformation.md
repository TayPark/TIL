# Cloudformation

- 인프라 관리 간소화를 목적으로 하는 서비스
- AWS의 리소스를 일일히 설정하지 않고 서비스의 프로비저닝과 설정을 미리 구성하여 반복 작업을 줄임
- EC2, Auto Scaling Group부터 ELB, RDS, S3 등을 사전에 구성하여 한 번의 클릭으로 다수의 서비스를 빠르게 생성할 수 있음
- 생성된 리소스 모음은 다른 계정 혹은 다른 리전에 옮겨 사용 가능

Stack
- 하나의 단위로 관리할 수 있는 AWS 리소스들의 모음
- 스택 생성, 업데이트 또는 삭제하여 리소스 모음을 생성, 업데이트, 삭제 가능
- 스택에서 실행중인 리소스를 변경해야 하는 경우 스택을 업데이트 할 수 있는데, 이 업데이트된 세트를 '변경세트'라 함
- 스택을 삭제하는 경우, 삭제할 스택을 지정하면 해당 스택과 스택 내 모든 리소스를 삭제
- AWS에서 리소스를 삭제할 수 없는 경우 스택이 삭제되지 않음
- 스택의 리소스 중 하나라도 성공적으로 생성되지 않은 경우, 성공적으로 생성한 모든 리소스를 모두 삭제(Automatic rollback on error)

Template
- 스택을 구성하는 AWS 리소스를 JSON 혹은 YAML 형식으로 지정한 파일
- 템플릿은 로컬 혹은 S3에 저장되며, 템플릿을 불러올 때 S3 bucket을 지정할 수 있음
- Template design를 통해 생성할 수 있으며 S3 bucket에 저장된 것을 불러와 생성할 수 있음
- 템플릿의 요소
  - Resources: 필수 섹션, Cloudformation에 포함될 리소스
  - Parameters: 선택 섹션, 스택 생성 및 업데이트시 템플릿에 전달하는 값, 사용자가 선택하는 여러 요소들(EC2 유형 등)
  - Conditions: 선택 섹션, 조건문, 리소스가 생성되는 조건을 만들어 조건 충족시에만 리소스를 만들 수 있도록 하는 요소
  - Metadata: 선택 섹션, 템플릿에 대한 세부 정보를 제공하는 임의의 JSON, YAML 객체
  - Mappings: 선택 섹션, Key에 해당하는 Value 세트를 생성하고 해당하는 리소스 생성

과금
- Cloudformation 서비스 자체는 무료