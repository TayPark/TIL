# Auto scaling

- EC2 인스턴스를 자동으로 시작하거나 종료하여 애플리케이션 로드를 처리하기에 적절한 수의 EC2를 유지할 수 있도록 하는 서비스
- 사용자 정의 조건에 따라 인스턴스 갯수를 자동으로 확장 또는 축소
- 모니터링을 통해 비정상 인스턴스를 탐지하고 교체 가능
- ELB 대상 그룹을 Auto Scaling Group(ASG)에 포함시켜 자동생성된 EC2로 로드밸런싱 가능
- 수요 변화가 예측 가능한 경우 예약된 일정을 통해 정해진 시간에 늘리거나 줄이도록 설정 가능
- ASG 내 손상된 인스턴스가 발견될 경우, Auto Scaling 이를 자동으로 종료하고 새로운 인스턴스로 교체
  - 약 5분 소요
- 시작 구성(Launch Configuration)
  - Auto Scaling에서 새로운 인스턴스를 시작할 때 기반이 되는 구성
  - AMI, 인스턴스 타입, 보안그룹, 스토리지 등을 구성 가능
  - 시작 구성은 생성시 수정이 불가능하며, 복사와 삭제만 가능
    - 변경을 위해서는 **기존의 시작구성을 새로운 시작 구성을 만드는 재료로 사용**해야 함
  - **하나의 ASG는 하나의 시작구성을 반드시 가짐**
- 조정 정책(Scaling)
  - 최소, 목표, 최대 크기 설정 가능. 별다른 정책이 없으면 목표 크기 유지
  - 대상 추적 정책: ASG의 지표 평균값을 목표로 인스턴스 수 조절
  - 단순 조정 정책: 지표의 임계치에 도달할 경우, 사용자가 정한 인스턴스 수 조절
  - 단계 조정 정책: 지표 값에 따라 증감 수를 다르게 줄 수 있음
- 조정 휴지(Scaling Cooldown)
  - ASG 생성 시점을 포함하여 인스턴스 생성 혹은 제거 후, 지표의 임계값을 넘더라도 인스턴스를 생성하지 않고 기다리는 기간
    - 5분
- 수명 주기 후크(Lifecycle Hook)
  - 지표의 임계값에 의해 Scale In/Out이 되고 난 후 In Service 상태에 돌입하기 전에 사용자가 정의한 작업을 수행하는 시간을 설정하는 기능
  - 기본 1시간(3600초)
  - 인스턴스 시작/종료시 사용자가 작업을 수행할 수 있음
  - 이 시간 동안 인스턴스에 설치/설정 가능
