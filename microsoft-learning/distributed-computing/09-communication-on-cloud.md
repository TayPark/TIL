# 클라우드에서의 통신

DSM과 같은 분산 공유 메모리 시스템의 경우에도 메세지는 컴퓨터 간에 전달된다. 따라서 모든 조정 작업은 메세지를 중심으로 진행된다. 클라우드의 경우 분산 시스템은 성능, 비용, QoS라는 세 가지 주요 이유로 대상 엔터티에 충분히 빠르게 전달하기 위해 기본 네트워크에 크게 의존한다. 특히, 빠른 메세지 전달은 실행 시간을 최소화하고, 비용을 절감하며, 특히 오디오 및 비디오 애플리케이션의 QoS를 높인다. 이로 인해 클라우드 프로그램을 개발할 때 통신 문제를 집중적으로 다루게 된다.

### 공동 배치(Colocation)

여러 컴퓨터에 걸쳐 작업을 분산할 경우 통신량이 많은 엔터티를 함께 배치하려고 한다. 이 전략은 클라우드 네트워크에 대한 작업 부담을 완화하고 향상시킬 수 있다. 전체 통신 볼륨(또는 메세지 수)가 효과적으로 최소화되더라도 부하가 불균형하면 병목이 발생할 수 있다. 통신 볼륨은 최소화되지만 일부 컴퓨터가 다른 컴퓨터보다 더 큰 파티션(더 많은 정점 포함)을 수신하게 될 수 있다. 이상적이면서 까다로운 접근 방법은 컴퓨터간 계산 오차를 피하면서 통신 오버헤드를 최소화하는 것이다. 이 전략은 통신량이 많은 엔터티를 함께 배치할 수 있게 여러 컴퓨터 간에 작업을 효과적으로 분할하는 것이다.

### 유효 파티션 매핑

클라우드에서 통신의 최대 효율성을 얻으려면 **그래프 또는 데이터 파티션에 해당하는 파티션을 컴퓨터에 매핑할 때 기본 네트워크 토폴로지를 완전히 이해해야** 한다. 일반적으로 대상에 도달하기 전에 메세지가 적중하는 스위치 수를 결정해야 한다. 클러스터 네트워크는 컴퓨터를 연결하는 두 개의 `RS(Rack Switch)`와 RS를 연결하는 `CS(Core Switch)`로 구성된다. 컴퓨터 간의 대역폭은 네트워크 토폴로지에서 상대적 위치에 따라 달라진다. 예를 들어 동일한 랙에 있는 컴퓨터는 고대역폭 연결을 공유한다.

**네트워크 토폴로지와 랙 구성에 대한 이해가 없다면 대규모 클라우드 프로그램에서 비효율성을 초래할 수 있다.** 메세지를 라우팅하기 위해 발생하는 홉을 동일한 랙에 존재하는 컴퓨터를 사용한다면 최소의 홉으로 구성할 수 있다. 이 경우 통신 네트워크 대기 시간이 감소하고 전반적인 성능이 향상된다. 하지만 이는 퍼블릭 클라우드에서 네트워크 토폴로지가 숨겨져 있기 때문에 클라우드에서 쉽게 달성할 수 없다. `Netperf` 같은 벤치마크를 이용하여 모든 클러스터 노드 쌍 간에 지점 TCP 스트림 대역폭을 측정하는 방식으로 네트워크 토폴로지를 이해할 수 있다. 이 방식으로 노드의 상대적 위치를 예측하고 클러스터의 랙 토폴로지에 대한 합리적인 유추가 가능하다.