# 대칭 및 비대칭 아키텍처

세 번째 디자인 고려 사항은 조직 구조 중 하나이다. 마스터-슬레이브 구조(비대칭)과 P2P(대칭) 아키텍처에서 분산 프로그램을 구성할 수 있다.

### 마스터 슬레이브 구조

이 구조에서는 **마스터**라는 중앙 프로세스가 모든 논리와 제어를 처리하며 다른 모든 프로세스(**슬레이브**)는 마스터에 종속된다. 양방향 연결을 통해 기본 프로세스에서 각 종속 프로세스와 통신할 수 있으며, 어떤 슬레이브 프로세스 간에도 상호 연결은 허용되지 않는다. 이러한 상황에서 기본 프로세스는 **메타 데이터 구조**라고 하는 각 종속 프로세스의 네트워크 위치를 추적해야 하며, 각 종속 프로세스는 항상 기본 프로세스를 식별하고 찾을 수 있어야 한다.

마스터 슬레이드 구조에서 기본 프로세스는 다음 두 가지 프로토콜 중 하나를 사용하여 종속 프로세스 간 작업을 분산시킬 수 있다.

- **Push-based**: 마스터 프로세스에서 일방적으로 종속 프로세스 간 작업을 동일하게 분산하여 작업을 할당한다. 이 과정에서 속도 저하/장애를 겪고있는 종속 프로세스로 인해 정체될 수 있으며, 이에 따라 부하 불균형이 발생하여 성능 저하를 초래할 수 있다. 이 경우, 종속 프로세스의 헬스체커를 두어 준비 완료일 경우에만 작업을 할당하도록 할 수 있다. 클라우드에서 이질성, 성능 예측 불가능성 및 확장성으로 인한 결함 및 느린 프로세스가 발생할 가능성이 높으므로, 클라우드에서 push-based 프로토콜의 효율성이 떨어질 수 있다.
- **Pull-based**: 이 전략에서는 종속 프로세스가 작업 할당을 요청한다. 종속 프로세스의 헬스체커 로직이 동작하지 않으므로 복잡성이 줄어들고, 부하 불균형이 방지될 수 있다. 그렇지만 기본 프로세스는 일반적으로 종속 프로세스의 태스크 진행 상태를 추적하고 내결함성 매커니즘을 해결하기 위해 종속 프로세스를 모니터링 해야한다. Hadoop MR, Pregel은 Pull-based 프로토콜을 활용한다.

이 경우 마스터 프로세스에서 SPOF가 발생한다. 하지만 구현 복잡도가 낮고, 의사결정에 대한 투표 매커니즘을 필요로 하지 않아 전체 프로세스의 모든 사항을 제어할 수 있다. 

`투표(Voting)` 매커니즘은 한 태스크가 태스크 중 과반수에게 특정 작업에 대한 권한을 요청하고, 권한을 획득할 수 있도록 하는 것이다. 투표 매커니즘은 일반적으로 분산 프로그램의 구현을 복잡하게 만든다.

### 피어 투 피어

**태스크가 동등한 위치에서 독립적으로 작업하며 통신을 통해 작업을 교환**할 수 있다. P2P는 SPOF 및 대역폭 병목의 발생 가능성을 없애주므로 우수한 확장성과 강력한 내결함성을 가진다. 하지만 일반적으로 의사결정을 투표 매커니즘을 통해 전체적으로 수행해야 한다. 이 경우 구현 복잡성 증가, 통신 오버헤드 증가, 그리고 대기 시간 증가같은 문제가 생기며 클라우드와 같은 대규모 시스템에서 특히 두드러진다. GraphLab은 P2P를 따른다.
