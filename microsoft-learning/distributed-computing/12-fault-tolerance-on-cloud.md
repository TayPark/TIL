# 클라우드에서 내결함성

단일 프로세서 시스템에서 클라우드와 다른 분산 시스템을 구분하는 한 가지 기본적 특징은 실패 개념이다. 특히, 분산 시스템에서 노드 또는 구성요소가 하나 실패해도 전체 시스템은 계속 작동할 수 있다. 반면에 단일 프로세서 시스템에서 하나의 구성요소가 실패해도 전체 시스템이 실패하게 된다. 분산 시스템을 디자인할 때 중요한 목표는 **성능에 심각한 영향을 주지 않으면서 부분 오류를 자동으로 허용할 수 있는 방법으로 구성**하는 것이다. 분산 시스템에서 오류를 마스킹하는 핵심 기술은 RAID 같은 하드웨어 중복성을 사용하는 것이다. 그러나 대부분의 경우 분산 프로그램은 분산 시스템의 기본 하드웨어 내결함성 기술에만 의존할 수 없다. 분산 프로그램에서 적용할 수 있는 흔한 기술 중 하나는 **소프트웨어 중복성**이다.

소프트웨어 중복성의 일반적인 유형 중 한 가지는 태스크 중복성(복원력 또는 복제)로, 태스크 실패 및 속도 저하를 방지한다. P2P 모델의 경우 모든 태스크는 동일한 작업을 수행한다는 점에서 동일하다. 결국 한 태스크의 결과만 수락되고 다른 결과는 무시된다.

분산 프로그램에서 내결함성은 오류가 발생되었을 때 계속 작동하는 것뿐 아니라 오류에서 복구하는데 주안점을 둔다. 여기서 기본적인 개념은 결함있는 상태를 결함 없는 상태로 바꾸는 것이며 이 목표를 달성하는 방법은 복구이다. 이 전략을 사용하기 위해 분산 시스템을 현재의 결함 있는 상태에서 오류가 발생했을 때 마지막으로 기록된 올바른 상태로 돌아가기 위해 프로세스에서 시스템 상태를 주기적으로 기록하여 `체크포인트`를 획득해야 한다.

분산 시스템에서 각 프로세스를 가장 최근에 저장된 상태로 롤백하고 분산 체크포인트를 검사하여 일관성을 확인할 수 있다. 하지만 분산 체크포인트은 적절한 복구 솔루션을 구현하지 못할 수 있는 비용이 많이 드는 작업이다. 따라서 내결함성이 있는 많은 분산 시스템에서는 **체크포인트 기능을 메세지 로깅과 결합하여 메세지 전송 전, 체크포인트 작성 후에 각 프로세스 메세지를 기록**한다. 