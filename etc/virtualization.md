# 가상화

## 배경

가상화는 진짜가 아닌 것을 진짜처럼 느끼게 해주는 것을 말한다. 가상현실 등을 예로 들 수 있겠다.

보통 우리가 말하는 가상화는 **싱글 머신에서 여러 개의 머신이 있는 것처럼 사용하게 만드는 기술**을 일컫는다. 보통 OS 가상화를 할 때 VM(Virtual Machine)을 떠올리면 되겠다.

가상화가 나오게 된 배경은 하나의 물리 머신에서 여러 애플리케이션을 구동하기 위함이었을 것이다. 각 애플리케이션은 각자의 구동 환경이 존재하고, 각 구동 환경을 해당 물리 장비에서 모두 구현하기에는 충돌(각자의 DB가 필요하다던가)이 발생할 수도 있고 환경 구분이 필요하다던가 등의 여러 제약사항이 발생하기 때문이다. 

## 가상화는 어떻게 동작할까?

가상화는 여러개의 가상 머신(가상 컴퓨터, 가상 인스턴스, 가상 버전, 또는 흔히 VM)을 만든다. 이는 하나의 물리 머신으로부터 리소스를 분리한 것이고 **하이퍼바이저**에 의해 이루어진다. 각 가상 머신이 물리 머신 대신 동작하게 되고 하나의 머신에서 여러 개의 OS를 구동할 수 있게 된다. 

**하이퍼바이저**는 가상 머신들이 필요한 리소스를 할당하고 관리하는 역할을 한다. 하이퍼바이저는 OS레이어 위에서 구동하는 소프트웨어 이므로 OS마다 다르다. 예를들어 리눅스에서는 KVM(Kernel-based VM)을 사용한다. 여담으로 KVM은 리눅스의 한 파트이므로 호스트 머신이 다수의 VM을 구동하는데 하이퍼바이저를 분리하지 않아도 된다.

## 가상화와 클라우드 컴퓨팅

클라우드 컴퓨팅에서 가상화를 사용한다는 말이 생소할 수도 있다. 이는 사용자의 관점이 아닌 벤더사의 관점에서 보면 가상화를 사용한다는 점을 알 수 있다. 아래의 시나리오를 살펴보자.

1. 위에서 언급했다시피 가상화는 하이퍼바이저를 통해 호스트 머신에서 가상 머신을 구동하기 위한 리소스를 할당해주고 관리한다.
2. 이 가상 리소스들을 풀링(pooling)하여 IDC에 두고 네트워크로 접속이 가능하도록 한다. 이 또한 클라우드라고 할 수 있다.
3. 클라이언트가 스토리지나 컴퓨팅 파워를 요청할 때 클라우드 관리 소프트웨어가 요청한 컴퓨터에게 리소스 풀로부터 제공받은 리소스를 클라이언트에게 프로비저닝 해준다.
4. 클라이언트가 리소스가 더 이상 필요하지 않게되면 클라우드 관리 소프트웨어가 해당 리소스를 회수한다. 흔히 elastic 또는, automated infra scaling 이라 한다.

## 가상화의 이점

- 효율성: 하나의 호스트 머신에서 여러 가상 머신을 구동할 수 있게 한다. 이는 리소스 사용량을 최대로 뽑아낼 수 있다. 하드웨어 사용에 대한 비용 절감, 쿨링(cooling), 그리고 관리가 쉬워진다. 
- 신뢰성: 가상화는 서버의 백업과 회복을 VM 스냅샷으로 할 수 있게 한다.
- 비즈니스 전략: 가상화 소프트웨어는 조직에게 유연한 리소스 전략을 제공한다. 가상 머신은 백업과 회복이 쉽고 테스트와 실험을 쉽게 제공할 수 있다는 장점을 지니기 때문이다. 또한 클라우드에서 제공하는 리소스 풀을 통해 리소스를 유연하게 사용할 수 있다는 점 또한 장점으로 꼽힌다.

## 가상화의 타입

### 애플리케이션, 데스크탑 가상화

애플리케이션 가상화: 호스트 OS에 관계없이 애플리케이션을 가상 머신의 OS 위에서 구동할 수 있게 한다.

데스크탑 가상화: 데스크탑을 가상화하여 장소에 관계없이 사용할 수 있도록 한다.

### 네트워크 가상화

네트워크 가상화는 사용 가능한 대역폭을 나눠 채널단위로 분리하며 이 채널들은 서버나 필요한 디바이스에게 할당시킬 수 있으며, 기반 인프라를 수정하지 않아도 로드밸런싱과 방화벽 프로비저닝 등의 기능을 쉽게 만들어준다.

일반적으로 IT팀에서 네트워크 조작을 위해 관리자의 콘솔에서 조작하게 되는데, 네트워크 기능을 가상화(Network Function Virtualization)으로 특정 네트워크 디바이스에서 제공하는 기능(네트워크 프로비저닝 및 관리)을 제공할 수도 있다. 이는 ![네트워크_가상화](https://www.citrix.com/solutions/app-delivery-and-security/what-is-software-defined-networking.html) 를 참고하자.

### 스토리지 가상화

스토리지 가상화는 여러 물리 스토리지를 네트워크로 묶고 풀링하여 하나의 (가상)스토리지로 제공할 수 있다. 스토리지 가상화를 제공하기 위해서는 제공하는 소프트웨어가 물리 스토리지들의 가용 공간 크기(capacity)를 파악할 수 있어야하며 그들을 하나의 가상 스토리지로 제공할 수 있어야 한다.

### 데이터 가상화

데이터 가상화는 애플리케이션이 데이터를 접근할 때 데이터의 물리적 위치와 형식에 구애받지 않고 사용할 수 있도록 하는 것을 말한다. 이는 데이터의 이동 또는 복사없이 여러 곳의 데이터 소스로부터 하나의 데이터 표현이 가능하다는 것을 말한다. 데이터 가상화는 분석이나 BI 애플리케이션에서 중요한 역할을 한다.

## 참고자료

source: https://www.citrix.com/ko-kr/solutions/vdi-and-daas/what-is-virtualization.html